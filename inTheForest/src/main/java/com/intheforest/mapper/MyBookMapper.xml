<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.intheforest.mapper.MyBookMapper">

<select id="selectMyPageBookList" parameterType="String" resultType="mybook">
select b.book_no
       ,b.site_no
       ,s.site_name
       ,s.category
       ,b.mem_cnt
       ,b.start_date
       ,b.end_date
       ,b.total_price
       ,b.create_date
       ,b.cancel_flag
       ,b.car_num
       ,b.member_id
       ,(to_date(substr(b.end_date,1,10),'YYYY/MM/DD') - to_date(substr(b.start_date,1,10),'YYYY/MM/DD')) add_date
       ,to_char(to_date(substr(b.start_date,1,10),'YYYY/MM/DD'), 'YYYY-MM-DD') site_date
from site_book b join site s
                 on b.site_no = s.site_no
where b.member_id = #{member_id}
</select>

</mapper>